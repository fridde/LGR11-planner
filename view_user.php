<?php 	/* PREAMBLE */    $url = "https://raw.githubusercontent.com/fridde/friddes_php_functions/master/include.php";    $content = file_get_contents($url);    if($content != FALSE){        file_put_contents("include.php", $content); 	}    include "include.php"; 	/* END OF PREAMBLE */	inc("fnc,sql");	$ini_array = parse_ini_file("config.ini", TRUE);	activate_all_errors();	extract(extract_request($ini_array["variables"]["v"]));		$matchingPassword = 1 == count(sql_select("lgr_users", array("AND", array("user" => $user, "password" => $key))));		list($html, $head, $body, $ul) = array_fill(0,20,""); 	$head .= qtag("meta");	$head .= inc("jquery,jqueryUIjs, jqueryUIcss,css,bootcss,bootjs,boottheme,fAwe,init,css" , FALSE, TRUE);	$head .= tag("title", "LGR11 - Login");		$html .= tag("head", $head); 		if($matchingPassword){		$collections = sql_select("lgr_collections", array("user" => $user));				$body .= tag("h1", "Välkommen " . $user);		$body .= tag('p', 'Ditt lösenord är ' . $key);		$body .= link_for('index.php?user=' . $user . '&key=' . $key, 'Skapa ny planering') . '<br>';		$body .= 'Lägg till befintlig planering <input type="text" name="c" placeholder="Planeringskod (5 tecken)">';		if(count($collections) > 0){						foreach($collections as $collection){				$li = $collection["col_name"] . " - " . $collection["col_code"] . " - ";				$link_prefix = 'http://www.';				$link = 'sigtunanaturskola.se/lgr11/?c=' . $collection["col_code"];				$link_suffix = '&user=' . $user . "&key=" . $key;				$li .= tag("a", $link, array("href" => $link_prefix . $link . $link_suffix));				$ul .= tag("li", $li);			}			$body .= tag("ul", $ul);		}		else {			$body .= tag("p", 'Du har inga LGR11-planeringar än.');		}	}	else {		redirect("login.php?m=wp");	}	$html .= tag("body", $body);		echo $html;?>